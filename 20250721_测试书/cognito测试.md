了解了，Jo。以下是更详细的 AWS Cognito 测试手册（Markdown 版），涵盖：
	•	用户生命周期完整流程（注册 → 验证 → 登录 → 更新资料 → 重置密码 → 删除账户）
	•	Token 管理与权限控制
	•	与前端 UI/React 的集成联动
	•	API 授权保护（含用户组、IAM Role、API Gateway 权限验证）
	•	安全性异常处理（Token篡改、爆破尝试、MFA 失败等）

⸻

🧪 AWS Cognito 機能テスト仕様書（完全版・Markdown）

📌 基本情報
	•	対象：AWS Cognito（User Pool + Identity Pool 統合）
	•	対象環境：本番・検証環境（React + API Gateway + Lambda）
	•	テスト範囲：
	•	認証機能（サインアップ、ログイン、MFA）
	•	認可（Token 発行と検証、グループ制御）
	•	フロントUI連携
	•	API 認可と権限制御
	•	セキュリティテスト（例外系含む）

⸻

🧭 テストカテゴリ一覧

カテゴリ	説明
ユーザー登録/確認	メール+パスワードで登録し、メールリンクで確認するフロー
ユーザー認証	ログイン（成功/失敗）、MFA処理、セッション維持
プロフィール管理	ユーザー名、電話番号、カスタム属性などの変更
パスワードリセット	パスワード忘れ → リセットメール受信 → 設定完了
ユーザー削除	サインアウト＋アカウント完全削除確認
トークン関連	Access/ID/Refresh Token 正常性、有効期限、失効後挙動確認
API 認可	各ユーザーグループに応じた API 呼び出し制限
セキュリティ / 異常系	Token 改ざん、無効コード、暴力破解、未確認ユーザーによる操作
UI/UX連携	ログイン画面、エラー表示、ローディング表示、タイムアウトの UI 対応など


⸻

✅ ユーザー登録（Sign-Up）

No	テスト項目	操作手順	期待結果
01	有効なメール+パスワード	メール入力（test@example.com）＋強いパスワード	確認コード送信。未確認ユーザー状態になる
02	弱いパスワード入力	「abc123」など最低文字数・複雑性不足	「パスワードが弱すぎます」とエラー表示
03	無効なメールアドレス	「test@@@」など無効なフォーマット	バリデーションエラー表示
04	既に存在するメール登録	すでにサインアップ済みのアドレスで登録	「既存のユーザーです」表示
05	確認コード期限切れ	登録後24時間放置 → 期限切れコードで確認試行	「確認コードの期限が切れました」表示


⸻

✅ ユーザー認証（Sign-In）

No	テスト項目	操作手順	期待結果
06	正常ログイン	登録済みメール + 正しいパスワードを入力	Access/ID/Refresh Token 発行、トップ画面へ遷移
07	パスワード間違い	正しいメール + 誤ったパスワードを3回入力	「パスワードが間違っています」、アカウントロック検討（条件設定）
08	確認前アカウントログイン	サインアップしたがコード未確認 → ログイン	「ユーザーが未確認です」表示
09	無効ユーザーでログイン	存在しないメールアドレス使用	「ユーザーが存在しません」表示
10	ログイン後セッション維持	1時間内のページ遷移	トークン有効、再ログインなし


⸻

✅ MFA（二要素認証）

No	テスト項目	操作手順	期待結果
11	MFA 有効化 → 再ログイン	電話番号登録 → SMS MFA 有効 → 再ログイン	SMS コード入力画面 → 正常ログイン
12	MFA 認証コード誤り	SMS コード入力欄に誤った数字を入力	「認証コードが正しくありません」表示
13	MFA スキップ可能設定	optional MFA モードでログイン	MFA バイパスでログイン可能


⸻

✅ パスワードリセット

No	テスト項目	操作手順	期待結果
14	パスワード再設定正常系	登録メール → 「パスワードを忘れた方」→ メールコード入力	新パスワード設定完了。再ログイン可能になる
15	メールアドレス誤り	存在しないメールで再設定申請	「ユーザーが存在しません」
16	古い確認コード使用	古いコードで再設定	「コードの有効期限切れ」エラー


⸻

✅ API 認可・トークン検証

No	テスト項目	操作手順	期待結果
17	正常なトークンで API 呼び出し	Access Token を Authorization ヘッダーに付与し API 呼び出し	HTTP 200、レスポンス正常
18	トークン未付与で API 呼び出し	Authorization ヘッダーなし	HTTP 401 Unauthorized
19	改ざんされた Token 使用	Token payload 改変 → API に送信	HTTP 403、署名不一致エラー
20	Refresh Token で Access 更新	有効期限切れ後、自動更新ロジックで再取得	新 Access Token 取得し、操作継続可能
21	無効なグループで API 呼び出し	管理者専用 API を一般ユーザー Token で呼び出し	HTTP 403 Forbidden


⸻

✅ UI/UX 表示項目

No	テスト項目	操作手順	期待結果
22	エラー表示正確性	間違ったパスワードやメール → ログイン	「メールまたはパスワードが間違っています」など
23	ローディング表示	サインイン、API 呼び出し中	スピナーまたはロード中アニメーション表示
24	自動ログアウト	アイドル時間経過（例：60分）	自動ログアウト。ログイン画面に戻る


⸻

✅ セキュリティ・例外系

No	テスト項目	操作手順	期待結果
25	トークン改ざん検出	JWT Payload を Base64 で手動改ざんし API に送信	API 側が署名不一致で拒否
26	同一セッションで複数デバイス	同一アカウントで異なるブラウザ2つでログイン	両方ログイン可能 or ポリシーに応じて制限される
27	暴力破解防止	同一 IP から短時間に 10 回連続ログイン失敗	ロック or CAPTCHA 要求


⸻

如需此 Markdown 导出为 .md 文件，或你希望我接着为每项补充 curl 示例、Postman 请求、React 实装示例（例如如何传送 Token、判断登录状态）我也可以进一步细化。是否需要生成这些辅助资料？
